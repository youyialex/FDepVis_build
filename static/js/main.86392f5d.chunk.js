(this["webpackJsonpreact-d3-dashboard"]=this["webpackJsonpreact-d3-dashboard"]||[]).push([[0],{242:function(t,e,a){},260:function(t,e,a){},409:function(t,e,a){},410:function(t,e,a){},411:function(t,e,a){},416:function(t,e,a){},417:function(t,e,a){"use strict";a.r(e);var n=a(3),r=a(0),i=a(5),s=a.n(i),c=(a(241),a(22)),l=a(23),o=a(25),d=a(24),u=a(420),h=a(421),p=a(63),f=a(4),m=(a(242),a(36)),y=a.n(m),g=a(111),v=a(29),b={familyInfo:[{key:38,ID:38,people:121,SNum:12},{key:149,ID:149,people:113,SNum:10},{key:27251,ID:27251,people:404,SNum:39},{key:42623,ID:42623,people:81,SNum:10},{key:68939,ID:68939,people:244,SNum:23},{key:176860,ID:176860,people:426,SNum:44},{key:603481,ID:603481,people:181,SNum:19},{key:791533,ID:791533,people:114,SNum:10},{key:903988,ID:903988,people:58,SNum:5}],focusFamily:42623,focusPID:10787,selectedFamily:[38,149,27251,42623]},j=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_FAMILY":return Object(v.a)(Object(v.a)({},t),{},{selectedFamily:[].concat(Object(p.a)(t.selectedFamily),[e.id]),focusFamily:e.id});case"REMOVE_FAMILY":return Object(v.a)(Object(v.a)({},t),{},{selectedFamily:t.selectedFamily.filter((function(t){return t!==e.id})),focusFamily:x(t,e)});case"SELECT_FAMILY":return Object(v.a)(Object(v.a)({},t),{},{focusFamily:e.id});case"SELECT_PERSON":return Object(v.a)(Object(v.a)({},t),{},{focusPID:e.id});default:return Object(v.a)({},t)}};function x(t,e){return console.log(t.selectedFamily[t.selectedFamily.length-1]),t.selectedFamily[t.selectedFamily.length-1]===e.id?t.selectedFamily[t.selectedFamily.length-2]:t.selectedFamily[t.selectedFamily.length-1]}var k=a(166),O=Object(g.createStore)(j,Object(k.composeWithDevTools)()),D={addFamily:function(t){return{type:"ADD_FAMILY",id:t}},removeFamily:function(t){return{type:"REMOVE_FAMILY",id:t}},selectFamily:function(t){return{type:"SELECT_FAMILY",id:t}},selectPerson:function(t){return{type:"SELECT_PERSON",id:t}}},I=function(t){Object(o.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(c.a)(this,a),(n=e.call(this,t)).state={data:[[11,27,2],[98,21,2],[17,40,3],[43,21,3],[61,1,3],[2,66,1],[92,52,2],[41,93,1],[54,59,1],[12,4,1],[82,90,1],[90,18,1],[77,54,3],[60,21,1],[73,47,2],[64,73,1],[24,30,3],[42,86,2],[63,35,3],[27,29,1],[5,87,2],[89,55,2],[100,24,3],[76,93,3],[13,1,2],[99,39,3],[66,96,2],[41,72,1],[33,28,2],[1,16,2],[35,19,2],[48,56,1],[72,2,3],[96,17,1],[86,19,1],[20,7,1],[77,39,3],[15,84,2],[40,51,1],[25,23,2],[8,51,2],[31,84,3],[85,1,3],[100,93,2],[94,85,2],[100,67,1],[64,93,3],[44,71,1],[1,80,3],[50,2,3],[45,87,2],[60,3,1],[14,60,2],[22,91,3],[4,59,2],[100,95,2],[25,38,2],[71,44,2],[89,10,3],[38,46,2],[4,38,1],[78,98,3],[59,92,3],[91,2,1],[37,27,3],[45,15,2],[90,90,3],[77,45,2],[88,20,3],[19,84,2],[78,46,3],[68,39,3],[76,32,2],[69,42,1],[81,71,1],[65,71,1],[68,96,2],[3,97,1],[46,56,2],[47,83,2],[56,87,3],[8,95,1],[11,42,1],[13,6,3],[26,81,2],[1,89,2],[23,64,2],[71,81,1],[64,28,1],[87,94,2],[62,20,1],[53,40,1],[70,18,2],[78,27,2],[51,96,2],[83,68,1],[54,10,3],[24,41,3],[90,4,1],[56,45,1]]},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var t=this;O.subscribe((function(){t.drawChart()})),this.uploadData()}},{key:"uploadData",value:function(){var t=this;y.a.get("http://106.52.126.175/api/getTsneview/").then((function(e){var a=e.data;t.setState({data:a},(function(){t.drawChart()}))}))}},{key:"drawChart",value:function(){var t=O.getState().selectedFamily;f.k("#ScatterPlot svg").remove();var e=this.state.data.filter((function(e){return-1!==t.indexOf(e.fid)})),a=document.getElementById("ScatterPlot").clientWidth,n=document.getElementById("ScatterPlot").clientHeight-30,r=a-20-90,i=n-40,s=f.k("#ScatterPlot").append("svg").attr("preserveAspectRatio","xMidYMid meet").attr("viewBox","0 0 "+a+" "+n),c=f.i().domain([0,Math.max.apply(Math,Object(p.a)(e.map((function(t){return t.x}))))]).range([0,r]),l=f.i().rangeRound([0,i]).domain([Math.max.apply(Math,Object(p.a)(e.map((function(t){return t.y})))),0]),o=f.j().domain(["38","149","27251","42623","68939","176860","603481","791533","903988"]).range(["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6"]),d=s.append("g").attr("transform","translate(10,10)"),u=O.getState().focusPID,h=f.k(".plot-tooltip");d.append("g").selectAll("circle").data(e).enter().append("circle").attr("cursor","pointer").attr("stroke",(function(t){return t.pid==u?"black":o(t.fid)})).attr("stroke-width","1").attr("fill",(function(t){return o(t.fid)})).attr("cx",(function(t){return c(t.x)})).attr("cy",(function(t){return l(t.y)})).attr("r",6).style("opacity","0.6").on("mouseover",(function(t){f.k(this).style("opacity",1),h.transition().duration(100).style("opacity",.7);var e=f.g(this);h.html("Family ID:  "+t.fid+"<br/>Persion ID: "+t.pid).style("left",e[0]+10+"px").style("top",e[1]+"px")})).on("mouseout",(function(t){f.k(this).style("opacity",.6),h.transition().duration(200).style("opacity",0)})).on("click",(function(t){O.dispatch(D.selectFamily(t.fid)),O.dispatch(D.selectPerson(t.pid))}));var m=d.append("g").attr("font-family","Arial").attr("font-size","12px").attr("font-weight","500").attr("transform","translate(".concat(r+10+10,",0)")).attr("text-anchor","start").selectAll("g").data(O.getState().selectedFamily).enter().append("g").attr("transform",(function(t,e){return"translate(0,"+25*e+")"})).on("click",(function(t){O.dispatch(D.selectFamily(t))})).attr("cursor","pointer"),y=O.getState().focusFamily;m.each((function(t){t===y&&f.k(this).append("rect").style("fill","#bbb").attr("width",75).attr("height",20).style("opacity","0.7").attr("rx",5).attr("x",-5).attr("y",-4).style("stroke-width",.5)})),m.append("circle").attr("r",6).attr("cx",6).attr("cy",6).attr("fill",o).style("opacity",(function(t){return t===y?"1":"0.7"})),m.append("text").attr("x",18).attr("dy",10).text((function(t){return"F"+t})).attr("fill",(function(t){return t===y?"#fff":"#000"}))}},{key:"render",value:function(){return Object(n.jsxs)("div",{id:"ScatterPlot",className:"pane",children:[Object(n.jsx)("div",{className:"header",children:"Scatter Plot"}),Object(n.jsx)("div",{class:"plot-tooltip"})]})}}]),a}(r.Component),w=(a(260),a(418)),F=function(t){Object(o.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(c.a)(this,a),(n=e.call(this,t)).state={dataSource:[],columns:[{title:"ID",dataIndex:"ID",key:"ID"},{title:"people",dataIndex:"people",key:"people"},{title:"SNum",dataIndex:"SNum",key:"SNum"}]},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.setState({dataSource:O.getState().familyInfo},(function(){t.setFocus()})),O.subscribe((function(){t.setFocus()}))}},{key:"setFocus",value:function(){var t=O.getState().focusFamily,e=document.getElementsByClassName("ant-table-row");console.log(e);for(var a=0;a<e.length;a++){e[a].getAttribute("data-row-key")==t?e[a].classList.add("onFocus"):e[a].classList.remove("onFocus")}}},{key:"onRowClick",value:function(t){console.log(t)}},{key:"getElementByAttr",value:function(t,e,a){for(var n=document.getElementsByTagName(t),r=[],i=0;i<n.length;i++)n[i].getAttribute(e)==a&&r.push(n[i]);return r}},{key:"render",value:function(){var t=this;return Object(n.jsxs)("div",{id:"FamilySelector",className:"pane",children:[Object(n.jsx)("div",{className:"header",children:"Family Selector"}),Object(n.jsx)(w.a,{onRow:function(e){return{onClick:function(a){console.log(e);var n=t.getElementByAttr("tr","data-row-key",e.key)[0],r=n.getAttribute("class");-1==r.indexOf("onSelect")?(n.classList.add("onSelect"),O.dispatch(D.addFamily(e.ID))):-1==r.indexOf("onFocus")?(n.classList.add("onFocus"),O.dispatch(D.selectFamily(e.ID))):(n.classList.remove("onSelect"),O.dispatch(D.removeFamily(e.ID)))}}},rowClassName:function(t){return-1!==O.getState().selectedFamily.indexOf(t.key)?"onSelect":""},dataSource:this.state.dataSource,columns:this.state.columns,size:"small",pagination:{hideOnSinglePage:!0,defaultPageSize:10}})]})}}]),a}(r.Component),S=(a(409),function(t){Object(o.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(c.a)(this,a),(n=e.call(this,t)).state={focusFamily:""},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.makeKey(),O.subscribe((function(){t.uploadData()})),this.uploadData()}},{key:"uploadData",value:function(){var t=this,e=O.getState().focusFamily;y.a.get("http://106.52.126.175/api/getFamilyTree/?fid="+e).then((function(a){var n=a.data;t.setState({focusFamily:e}),t.drawHorPro(n)}))}},{key:"drawHorPro",value:function(t){var e={width:document.getElementById("FamilyTree").clientWidth,height:document.getElementById("FamilyTree").clientHeight-45-60,margin:20},a={width:16,height:16,color:f.j().range(["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f","#eea60d","#a9402a","#845d54","#056f1f","#475e4c"])};f.l.prototype.moveToFront=function(){return this.each((function(){this.parentNode.appendChild(this)}))};var n,r=[];r[+(n=0)]={id:"Tree"+ +n,data:t},function(t){var n=f.k("#FamilyTree").selectAll("div.svgHolder").data(t,(function(t){return t.id})).call(r);function r(t){return t.attr("id",(function(t){return t.id})).each((function(t){!function(t,e,n){var r=n.width,i=n.height,s=n.margin,c=e.length<60?1:e.length/60,l=f.k(t);l.select("svg").remove();var o=l.append("svg").attr("id","treesvg").attr("width",r*c).attr("height",i).append("g").attr("class","content").attr("transform","translate("+s+","+s+")");o.selectAll("*").remove();var d=f.c().size([r*c-2*s,i-3*s]),u=f.m().id((function(t){return t.id})).parentId((function(t){return t.parent}))(e);d(u);var h=f.e().x((function(t){return t.x})).y((function(t){return t.y}));o.selectAll("path").data(u.links()).enter().append("path").attr("d",h).style("fill","none").attr("stroke","#ccc");var p=o.selectAll(".node").data(u.descendants()).enter().append("g").attr("class","node").attr("transform",(function(t){return"translate("+t.x+","+t.y+")"})),m=O.getState().focusPID;p.selectAll("circle").data((function(t){var e=[];return e="individual"===t.data.group?[{key:"ind",data:[t.data]}]:[{key:"self",data:[t.data]},{key:"spouse",data:t.data.spouse}],t.data.children&&e.push({key:"children",data:t.data.children}),e.filter((function(t){return t.data.filter((function(t){return!t.clinical_data}))}))})).enter().append("g").attr("transform",(function(t){var e="individual"===t.key?3:8,a="individual"===t.key?2.8:2.2,n=0,r=0;return"spouse"===t.key&&(n=e*a),"children"===t.key&&(n-=t.data.length%2==0?t.data.length/2*e-e/2:Math.floor(t.data.length/2)*e,r=15),"translate(".concat(n,", ").concat(r,")")})).selectAll("g").data((function(t){return t.data})).enter().append("g").attr("transform",(function(t,e){var a="individual"===t.group?3:8,n=e*a*("individual"===t.group?2.8:2.2),r=0;return"M"===t.sex&&(n-=a,r-=a),"translate(".concat(n,", ").concat(r,")")})).on("mouseover",(function(t){y.transition().duration(100).style("opacity",.85);var e="ID: "+t.id+"<br/>",a=f.g(g);y.html(e).style("left",a[0]-20+"px").style("top",a[1]-30+"px")})).on("mouseout",(function(){y.transition().duration(200).style("opacity",0)})).each((function(t){var e=f.k(this),a="individual"===t.group?3:8;"F"===t.sex?e.append("circle").attr("r",a):e.append("rect").attr("width",2*a).attr("height",2*a)})).style("fill",(function(t){return"Y"==t.is_suicide?"red":"Y"==t.is_deceased?"black":"#69b3a2"})).attr("stroke","#999").style("stroke-width",.5);var y=f.k(".tree-tooltip"),g=f.k("#FamilyTree").node();p.selectAll("g.personRadial").data((function(t){return("individual"===t.data.group?[{key:"ind",data:t.data}]:[{key:"self",data:t.data},{key:"spouse",data:t.data.spouse[0]}]).filter((function(t){return t.data.clinical_data}))})).enter().append("g").attr("class","personRadial").attr("transform",(function(t){var e="individual"===t.key?3:8,a="individual"===t.group?2.8:2.2,n=0,r=0;return"spouse"===t.key&&(n=e*a),"translate(".concat(n,", ").concat(r,")")})).attr("cursor","pointer").attr("transform",(function(t){return t.data.id==m?"scale(2)":"scale(1)"})).on("mouseover",(function(t){t.data.id!=m?(f.k(this.parentNode).moveToFront(),f.k(this).select("g").attr("transform","scale(4)")):f.k(this).select("g").attr("transform","scale(2)"),y.transition().duration(100).style("opacity",.85);var e="ID: "+t.data.id+"<br/>",n=f.d(t.data.clinical_data),r=1;for(var i in n){var s=n[i].key,c=n[i].value;0!==c&&(e+="<br/><svg width='10', height='10'><rect width='10', height='10', rx='2', style='fill:"+a.color(s)+"'></svg> "+s+": "+c,r++)}var l=f.g(g);y.html(e).style("left",l[0]-20+"px").style("top",l[1]-15*r-30+"px")})).on("mouseout",(function(){f.k(this).select("g").attr("transform","scale(1)"),y.transition().duration(200).style("opacity",0)})).on("click",(function(t){O.dispatch(D.selectPerson(t.data.id))})).each((function(t){!function(t){var e=t.holder,a=t.d,n=t.graphicopt,r=(n.width,n.height/2),i=n.color,s=e.append("g"),c=f.h().value((function(t){return t.value}))(f.d(a.clinical_data)),l=f.a().innerRadius(0).outerRadius(r);"M"===a.sex?(l.outerRadius(Math.sqrt(2)*r),s.append("circle").attr("r",Math.sqrt(2)*r),s.append("rect").attr("x",-r).attr("y",-r).attr("width",2*r).attr("height",2*r).style("fill","white").style("stroke","red").style("stroke-width",.5),s.append("clipPath").attr("id","mark-area").append("rect").attr("x",-r).attr("y",-r).attr("width",2*r).attr("height",2*r),s.attr("clip-path","url(#mark-area)")):s.append("circle").attr("r",r).classed("outer",!0).style("fill","white").style("stroke","red").style("stroke-width",.5),s.selectAll("path").data(c).enter().append("path").style("fill",(function(t){return i(t.data.key)})).attr("d",l)}({holder:f.k(this),d:t.data,graphicopt:a})}))}("#"+t.id,t.data,e)}))}n.exit().remove(),n.enter().append("div").attr("class","svgHolder").call(r)}(r)}},{key:"makeKey",value:function(){var t=document.getElementById("FamilyTree").clientWidth-60,e=["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f","#eea60d","#a9402a","#845d54","#056f1f","#475e4c"],a=f.k("#legendsvg").attr("height",60).attr("width",t).append("g").attr("class","legends").selectAll("g").data(["alcohol","psychosis","anxiety-non-trauma","somatic disorder","eating","bipolar spectrum illness","depression","interpersonal trauma","PD-Cluster C-anxiety","PD-Cluster B-emotional","PD","Impulse control disorder","obesity","cardiovascular","COPD","asthma","immune-autoimmune"]).enter().append("g").attr("class","keysgroup").attr("transform",(function(t,e){return"translate(".concat(60+e%8*148,", ").concat(20*Math.floor(e/8),")")}));a.append("rect").attr("width",12).attr("height",12).attr("rx",4).style("fill",(function(t,a){return e[a]})),a.append("text").attr("y","0.9em").attr("dx",15).style("font-size","12px").text((function(t){return t}))}},{key:"render",value:function(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{id:"FamilyTree",className:"pane",children:[Object(n.jsxs)("div",{className:"header",children:["Family Tree : F",this.state.focusFamily]}),Object(n.jsx)("div",{class:"legend-div",children:Object(n.jsx)("svg",{id:"legendsvg"})}),Object(n.jsx)("div",{class:"tree-tooltip"})]})})}}]),a}(r.Component)),C=(a(410),function(t){Object(o.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(c.a)(this,a),(n=e.call(this,t)).state={names:["m0","m1","m2","m3","m4"],attrs:["alcohol","psychosis","anxiety-non-trauma","somatic disorder","eating","bipolar spectrum illness","depression","interpersonal trauma","PD-Cluster C-anxiety","PD-Cluster B-emotional","PD","Impulse control disorder","obesity","cardiovascular","COPD","asthma","immune-autoimmune"],attrsmap:{alcohol:0,psychosis:1,"anxiety-non-trauma":2,"somatic disorder":3,eating:4,"bipolar spectrum illness":5,depression:6,"interpersonal trauma":7,"PD-Cluster C-anxiety":8,"PD-Cluster B-emotional":9,PD:10,"Impulse control disorder":11,obesity:12,cardiovascular:13,COPD:14,asthma:15,"immune-autoimmune":16},allTimes:[1,2,4],values:[]},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var t=this;O.subscribe((function(){t.uploadData()})),this.uploadData()}},{key:"uploadData",value:function(){var t=this,e=O.getState().focusFamily;y.a.get("http://106.52.126.175/api/getAttrview/?fid="+e).then((function(e){var a=e.data;t.setData(a),document.getElementById("BarChart").innerHTML="",document.getElementById("Heatmap").innerHTML="",t.drawChart()}))}},{key:"setData",value:function(t){for(var e,a=0,n=[],r=[],i=0;i<t.length;i++){var s=Object.values(t[i]).filter((function(t){return"number"===typeof t}));if(0!==(s=s.slice(2)).reduce((function(t,e){return t+e}),0)){r.push(t[i].pid);var c=-2;for(var l in t[i])c>=0&&n.push({row:a,col:c,times:t[i][l]}),c++;a++}}if(t.length){var o=Object.keys(t[0]).filter((function(t){return["pid","fid"].indexOf(t)<0}));e=new Object,o.forEach((function(a){e[a]=t.map((function(t){return t[a]})).reduce((function(t,e){return t+e}),0)}))}var d=Object.values(e).map((function(t){return t}));this.setState({values:n,names:r,allTimes:d})}},{key:"drawChart",value:function(){var t=this,e=this,a=document.getElementById("AttributesHeatmap").clientWidth,n=.87*a/17,r=this.state.names.length*n+20,i=.18*document.getElementById("AttributesHeatmap").clientHeight,s=this.state.values.map((function(t){return t.times})),c=f.i().domain([0,f.f(s)]).range(["white","#2171b5"]),l=2*i-20;f.k("#BarChart").append("svg").attr("width",a).attr("height",l).attr("id","barlabel").append("g").selectAll(".attrLabels").data(this.state.attrs).enter().append("g").attr("transform",(function(t,e){return"translate(".concat(e*n+.085*a+n/3,", ").concat(l,")")})).append("text").text((function(t){return t})).attr("font-size","8pt").attr("fill","#595959").attr("transform","rotate(-75)");var o=f.k(".heatmap-tooltip"),d=f.k("#BarChart").append("svg").attr("width",a).attr("height",i+5),u=.87*a,h=f.i().domain([0,17]).range([0,u]),p=f.b(h).ticks(17),m=(d.append("g").attr("transform","translate(".concat(.085*a,", ").concat(i,")")).call(p),f.i().domain([0,f.f(this.state.allTimes)]).range([i,0])),y=d.append("g").attr("transform","translate(".concat(.085*a,", 0)")).selectAll(".bar").data(this.state.allTimes).enter().append("g").attr("class","bar"),g=(f.k("#AttributesHeatmap").node(),f.k("#BarChart").node()),v=f.k("#Heatmap").node();y.append("rect").attr("x",(function(t,e){return n*e+.1875*n})).attr("y",(function(t){return m(t)})).attr("width",(function(){return.625*n})).attr("height",(function(t){return i-m(t)})).attr("fill","#91c0db").on("mousemove",(function(t,a){var n=f.g(g);o.style("left",n[0]+10+"px").style("top",n[1]+10+"px").style("display","inline-block").html(e.state.attrs[a]+"<br>sum:"+t).style("opacity",.9)})).on("mouseout",(function(t){o.style("display","none").style("opacity",0)}));var b=f.k("#Heatmap").append("svg").attr("width",a).attr("height",r).attr("id","heatmap"),j=O.getState().focusPID,x=(b.append("g").attr("class","nameLabel").attr("transform","translate(5, "+(5+n/2)+")").selectAll("text").data(this.state.names).enter().append("text").text((function(t){return t})).attr("x",0).attr("y",(function(t,e){return e*n})).attr("font-size","8.5pt").attr("cursor","pointer").attr("fill",(function(t){return t==j?"#2171b5":"#595959"})).on("click",(function(t){O.dispatch(D.selectPerson(t))})),b.append("g").attr("transform","translate(".concat(.085*a,", 0)")).attr("class","heatcards").selectAll("rect").data(this.state.values).enter());console.log(this.state.values);x.append("rect").attr("x",(function(t,e){return.87*a/17*t.col+2})).attr("y",(function(t){return t.row*n})).attr("rx",4).attr("ry",4).attr("width",n-5).attr("height",n-5).attr("stroke",(function(e){return t.state.names[e.row]==j?"black":"none"})).attr("stroke-width",(function(t){return 0==t.times?"0":"0.3"})).style("fill",(function(t){return c(t.times)})).attr("cursor","pointer").on("click",(function(e){O.dispatch(D.selectPerson(t.state.names[e.row]))})).on("mousemove",(function(t,a){var n=f.g(v);o.style("left",n[0]+10+"px").style("top",n[1]+150+"px").style("display","inline-block").html(e.state.attrs[t.col]+"<br>"+t.times).style("opacity",.9)})).on("mouseout",(function(t){o.style("display","none").style("opacity",0)}))}},{key:"render",value:function(){this.props.data;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"header",children:" Attributes Heatmap "}),Object(n.jsxs)("div",{id:"AttributesHeatmap",className:"pane",children:[Object(n.jsx)("div",{className:"heatmap-tooltip",style:{opacity:0},children:" "}),Object(n.jsx)("div",{id:"BarChart",children:" "}),Object(n.jsx)("div",{id:"Heatmap",style:{overflowX:"hidden"},children:" "})," "]})]})}}]),a}(r.Component)),A=(a(411),a(422)),M=function(t){Object(o.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(c.a)(this,a),(n=e.call(this,t)).state={ID:"ID: ",img:"./img/ASPHYXIA.jpg",data:{ID:133,Sex:"M",Birth_Year:1900,Death_Year:1950,BMI:25,Suicide_Weapon:"Rope",Death_Cause:"Acute carbon monoxide poisoning",suicide_glyphs:""}},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var t=this;O.subscribe((function(){t.uploadData()})),this.uploadData()}},{key:"uploadData",value:function(){var t=this,e=O.getState().focusPID;y.a.get("http://106.52.126.175/api/getDetailInfo/?pid="+e).then((function(e){var a=e.data;console.log("detailInfo",a),t.setState({ID:"ID: "+a.pid,img:"./img/"+a.suicide_glyphs+".png",data:{ID:a.pid,Sex:a.sex,Birth_Year:a.bdate.slice(0,4),Death_Year:a.ddate.slice(0,4),BMI:a.maxbmi.toPrecision(4),Suicide_Weapon:a.weapon,Death_Cause:a.cause_death}}),t.drawChart()}))}},{key:"drawChart",value:function(){var t;"M"==this.state.data.Sex?t='<svg preserveAspectRatio="none" id="man" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2940" width="200" height="200"><path d="M512 88m-88 0a88 88 0 1 0 176 0 88 88 0 1 0-176 0Z" fill="#333333" p-id="2941"></path><path d="M744.9 619.6c-21.3 5.7-43.3-6.9-49-28.3l-64.1-239c-1.2-4.5-7.9-3.6-7.9 1V1008c0 8.8-7.2 16-16 16h-64c-8.8 0-16-7.2-16-16V640c0-8.8-7.2-16-16-16s-16 7.2-16 16v368c0 8.8-7.2 16-16 16h-64c-8.8 0-16-7.2-16-16V353.3c0-4.7-6.7-5.6-7.9-1l-64.1 239c-5.7 21.3-27.7 34-49 28.3-21.3-5.7-34-27.6-28.3-49l69.5-260C339 240.7 402.4 192 474.8 192h74.3c72.5 0 135.9 48.7 154.6 118.7l69.5 260c5.7 21.3-6.9 43.2-28.3 48.9z" fill="#333333" p-id="2942"></path></svg>':"F"==this.state.data.Sex&&(t='<svg preserveAspectRatio="none" id="woman" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2987" width="225" height="225"><path d="M529.218 234.374c43.289 0 81.292 28.8 93 70.475l59.925 213.319c3.427 12.199-3.685 24.867-15.884 28.294-2.02 0.567-4.107 0.855-6.205 0.855-17.951 0-33.758-11.825-38.826-29.046l-53.568-182.01h-16.407l95.16 333.52h-87.43v244.56c0 19.694-15.966 35.659-35.66 35.659-19.693 0-35.658-15.965-35.658-35.659v-244.56h-17.112v245.697c0 18.983-15.39 34.372-34.372 34.372h-0.15c-19.09-0.084-34.522-15.583-34.522-34.673V669.78h-90.078l95.242-333.519h-14.872l-51.123 180.873c-5.047 17.855-21.342 30.183-39.897 30.183-13.136 0-23.785-10.649-23.785-23.785 0-2.17 0.297-4.329 0.882-6.418l59.465-212.205c11.687-41.706 49.705-70.535 93.017-70.535h98.858zM479.962 71c40.643 0 73.59 32.967 73.59 73.634 0 40.666-32.947 73.633-73.59 73.633s-73.59-32.967-73.59-73.633c0-40.667 32.947-73.634 73.59-73.634z" fill="#333333" p-id="2988"></path></svg>'),document.getElementById("body").innerHTML=t;var e=document.getElementById("body").clientHeight,a=document.getElementById("body").clientWidth,n=this.state.data.BMI;0==n&&(n=22);var r=a*(n/22),i=.9*e;console.log(n/22,r),"M"==this.state.data.Sex?f.k("#man").attr("width",r).attr("height",i).attr("transform","translate(".concat((200-r)/2,",").concat(.05*i,")")):"F"==this.state.data.Sex&&f.k("#woman").attr("width",r).attr("height",i).attr("transform","translate(".concat((200-r)/2,", ").concat(.05*i,")"));var s=this.state.data.Death_Year-this.state.data.Birth_Year;console.log(s),f.k("#body").append("svg").attr("width",a).attr("height",e).attr("transform","translate(0, ".concat(1.8*-(100-s),")")).append("rect").attr("width",a).attr("height",200).attr("fill","white").attr("opacity",.35)}},{key:"render",value:function(){return Object(n.jsxs)("div",{id:"DetailInfo",className:"pane",style:{overflow:"hidden"},children:[Object(n.jsx)("div",{className:"header",children:"Detail Information"}),Object(n.jsxs)(u.a,{justify:"space-around",align:"middle",children:[Object(n.jsx)(h.a,{span:10,style:{paddingTop:10},children:Object(n.jsx)(u.a,{children:Object(n.jsx)("div",{id:"body",style:{margin:10},children:" "})})}),Object(n.jsx)(h.a,{span:14,children:Object(n.jsxs)(A.a,{title:this.state.ID,style:{padding:10},children:[Object(n.jsx)(A.a.Item,{label:"Sex",span:2,children:this.state.data.Sex}),Object(n.jsx)(A.a.Item,{label:"BMI",span:2,children:this.state.data.BMI}),Object(n.jsx)(A.a.Item,{label:"Birth Year",span:2,children:this.state.data.Birth_Year}),Object(n.jsx)(A.a.Item,{label:"Death Year",span:2,children:this.state.data.Death_Year}),Object(n.jsx)(A.a.Item,{label:"Death Age",span:4,children:this.state.data.Death_Year-this.state.data.Birth_Year}),Object(n.jsx)(A.a.Item,{label:"Death Cause",span:4,children:this.state.data.Death_Cause}),Object(n.jsx)(A.a.Item,{label:"Suicide Weapon",span:2,children:this.state.data.Suicide_Weapon}),Object(n.jsx)(A.a.Item,{label:"",children:Object(n.jsx)("img",{width:50,style:{},src:this.state.img})})]})})]})]})}}]),a}(r.Component),B=(a(416),function(t){Object(o.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(c.a)(this,a),(n=e.call(this,t)).state={},n}return Object(l.a)(a,[{key:"render",value:function(){return Object(n.jsxs)("div",{children:[Object(n.jsxs)(u.a,{style:{height:"95vh"},children:[Object(n.jsxs)(h.a,{span:6,style:{height:"100%"},children:[Object(n.jsx)(u.a,{style:{height:"40%"},children:Object(n.jsx)(I,{})}),Object(n.jsx)(u.a,{style:{height:"60%"},children:Object(n.jsx)(F,{})})," "]}),Object(n.jsxs)(h.a,{span:18,style:{height:"100%"},children:[Object(n.jsx)(u.a,{style:{height:"60%"},children:Object(n.jsx)(S,{})}),Object(n.jsxs)(u.a,{style:{height:"40%"},children:[Object(n.jsxs)(h.a,{span:13,style:{height:"100%",backgroundColor:"#FFF"},children:[" ",Object(n.jsx)(C,{})," "]})," ",Object(n.jsxs)(h.a,{span:11,style:{height:"100%"},children:[" ",Object(n.jsx)(M,{})," "]})]})," "]})]}),Object(n.jsxs)(u.a,{style:{height:"5vh"},id:"footer",children:[Object(n.jsxs)("div",{style:{textAlign:"center"},children:["Source Code ",Object(n.jsx)("a",{href:"https://github.com/Chacha-Z/FDepVis",children:" https: //github.com/Chacha-Z/FDepVis"}),"; Author ",Object(n.jsx)("a",{href:"#",children:" \u6211\u6765\u53d6\u4e2a\u540d "}),"; "]})," "]})," "]})}}]),a}(r.Component));s.a.render(Object(n.jsx)(B,{}),document.getElementById("root"))}},[[417,1,2]]]);
//# sourceMappingURL=main.86392f5d.chunk.js.map